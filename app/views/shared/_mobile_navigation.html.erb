<!-- Mobile Bottom Navigation -->
<nav data-controller="mobile-navigation" class="fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-50 lg:hidden">
  <div class="flex items-center justify-around py-2 px-2 pb-safe-area">

    <!-- Dashboard -->
    <%= link_to authenticated_root_path,
        class: "flex flex-col items-center py-2 px-3 rounded-lg transition-colors #{current_page?(authenticated_root_path) ? 'text-rose-600 dark:text-rose-400' : 'text-gray-600 dark:text-gray-400'}" do %>
      <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5v4"></path>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v4"></path>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 5v4"></path>
      </svg>
      <span class="text-xs font-medium"><%= t('dashboard.mobile_navigation.dashboard') %></span>
    <% end %>

    <!-- Wishlists -->
    <%= link_to wishlists_path,
        class: "flex flex-col items-center py-2 px-3 rounded-lg transition-colors #{current_page?(wishlists_path) || request.path.start_with?('/wishlists') ? 'text-rose-600 dark:text-rose-400' : 'text-gray-600 dark:text-gray-400'}" do %>
      <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
      </svg>
      <span class="text-xs font-medium"><%= t('dashboard.mobile_navigation.wishlists') %></span>
    <% end %>

    <!-- Create -->
    <%= link_to new_wishlist_path,
        class: "flex items-center justify-center w-12 h-12 bg-rose-500 text-white rounded-full shadow-lg" do %>
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
      </svg>
    <% end %>

    <!-- Friends -->
    <%= link_to connections_path,
        class: "flex flex-col items-center py-2 px-3 rounded-lg transition-colors relative #{request.path.start_with?('/connections') || request.path.start_with?('/invitations') ? 'text-rose-600 dark:text-rose-400' : 'text-gray-600 dark:text-gray-400'}" do %>
      <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
      </svg>
      <% pending_invitations = current_user.received_invitations.pending.count %>
      <% if pending_invitations > 0 %>
        <div class="absolute -top-1 right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">
          <%= pending_invitations > 9 ? '9+' : pending_invitations %>
        </div>
      <% end %>
      <span class="text-xs font-medium"><%= t('dashboard.mobile_navigation.friends') %></span>
    <% end %>

    <!-- Profile -->
    <%= link_to edit_user_registration_path,
        class: "flex flex-col items-center py-2 px-3 rounded-lg transition-colors #{request.path.start_with?('/users') ? 'text-rose-600 dark:text-rose-400' : 'text-gray-600 dark:text-gray-400'}" do %>
      <div class="w-6 h-6 mb-1 rounded-full overflow-hidden border-2 border-current">
        <%= user_avatar_or_initials(current_user, size: 'w-full h-full text-xs') %>
      </div>
      <span class="text-xs font-medium"><%= t('dashboard.mobile_navigation.profile') %></span>
    <% end %>

  </div>
</nav>

<!-- Add bottom padding to body for navbar space -->
<style>
  @media (max-width: 1023px) {
    body {
      padding-bottom: 80px;
    }
  }

  .pb-safe-area {
    padding-bottom: env(safe-area-inset-bottom);
  }
</style>