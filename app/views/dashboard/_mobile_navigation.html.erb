<!-- Mobile Bottom Navigation -->
<div class="bg-white/95 dark:bg-gray-800/95 backdrop-blur-md border-t border-gray-200 dark:border-gray-700 px-4 py-2">
  <div class="flex items-center justify-around max-w-sm mx-auto">

    <!-- Dashboard -->
    <div class="flex flex-col items-center p-2">
      <%= link_to authenticated_root_path,
          class: "flex flex-col items-center gap-1 #{request.path == authenticated_root_path ? 'text-rose-600 dark:text-rose-400' : 'text-gray-500 dark:text-gray-400'} transition-colors" do %>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5v4"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v4"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 5v4"></path>
        </svg>
        <span class="text-xs font-medium"><%= t('dashboard.mobile_navigation.dashboard') %></span>
      <% end %>
    </div>

    <!-- Wishlists -->
    <div class="flex flex-col items-center p-2">
      <%= link_to wishlists_path,
          class: "flex flex-col items-center gap-1 #{request.path.start_with?('/wishlists') ? 'text-rose-600 dark:text-rose-400' : 'text-gray-500 dark:text-gray-400'} transition-colors" do %>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
        </svg>
        <span class="text-xs font-medium"><%= t('dashboard.mobile_navigation.wishlists') %></span>
      <% end %>
    </div>

    <!-- Create (FAB Style) -->
    <div class="flex flex-col items-center p-2">
      <%= link_to new_wishlist_path,
          class: "flex items-center justify-center w-12 h-12 bg-gradient-to-r from-rose-500 to-pink-500 text-white rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200" do %>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
      <% end %>
    </div>

    <!-- Friends -->
    <div class="flex flex-col items-center p-2 relative">
      <%= link_to connections_path,
          class: "flex flex-col items-center gap-1 #{request.path.start_with?('/connections') || request.path.start_with?('/invitations') ? 'text-rose-600 dark:text-rose-400' : 'text-gray-500 dark:text-gray-400'} transition-colors" do %>
        <div class="relative">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
          </svg>
          <!-- Notification Badge for Pending Invitations -->
          <% pending_invitations = @user.received_invitations.pending.count %>
          <% if pending_invitations > 0 %>
            <div class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">
              <%= pending_invitations > 9 ? '9+' : pending_invitations %>
            </div>
          <% end %>
        </div>
        <span class="text-xs font-medium"><%= t('dashboard.mobile_navigation.friends') %></span>
      <% end %>
    </div>

    <!-- Profile -->
    <div class="flex flex-col items-center p-2">
      <%= link_to edit_user_registration_path,
          class: "flex flex-col items-center gap-1 #{request.path.start_with?('/users') ? 'text-rose-600 dark:text-rose-400' : 'text-gray-500 dark:text-gray-400'} transition-colors" do %>
        <div class="w-6 h-6 rounded-full overflow-hidden border-2 border-current">
          <%= user_avatar_or_initials(@user, size: 'w-full h-full text-xs') %>
        </div>
        <span class="text-xs font-medium"><%= t('dashboard.mobile_navigation.profile') %></span>
      <% end %>
    </div>
  </div>

  <!-- Safe Area Bottom Padding for iPhones -->
  <div class="pb-safe-area"></div>
</div>

<style>
  /* Safe area support for mobile devices */
  .pb-safe-area {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Ensure content doesn't get hidden behind mobile navigation */
  @media (max-width: 1023px) {
    body {
      padding-bottom: 80px;
    }
  }

  /* Add subtle animation to the FAB */
  .mobile-fab {
    animation: gentle-bounce 2s infinite;
  }

  @keyframes gentle-bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-2px);
    }
    60% {
      transform: translateY(-1px);
    }
  }

  /* Notification badge animation */
  .notification-badge {
    animation: pulse-scale 2s infinite;
  }

  @keyframes pulse-scale {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
  }
</style>